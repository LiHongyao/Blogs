# å‰è¨€

æœ€è¿‘å…¬å¸é¡¹ç›®æœ‰ä¸ªéœ€æ±‚ï¼šå‰ç«¯æ¸²æŸ“äº”çº¿è°±å¹¶å®ç°è¯¸å¦‚ä¿®æ”¹éŸ³ç¬¦ã€æ­Œè¯ã€äººå£°/ä¼´å¥åŒæ­¥æ’­æ”¾ç­‰åŠŸèƒ½ï¼Œè°ƒç ”äº†è¯¸å¤šæ–¹æ¡ˆï¼Œå¦‚ [abcjs](https://www.abcjs.net/)ã€[opensheetmusicdisplay](https://opensheetmusicdisplay.org/) ä»¥åŠ [VexFlow](https://www.vexflow.com/)ï¼Œç»¼åˆè€ƒè™‘ï¼Œæœ€ç»ˆé€‰æ‹© abcjs å®ç°ã€‚

# å‰ç½®çŸ¥è¯† â€” ä¹ç† & äº”çº¿è°±

æ¨èé˜…è¯»ï¼š

1. [Bç«™æœ€é€šä¿—æ˜“æ‡‚çš„ä¹ç†è¯¾ç¨‹ >>](https://www.bilibili.com/video/BV1Hg411w7n2/?spm_id_from=333.999.0.0&vd_source=b539518f043998f08c722489225f1c3c)
2. [äº”çº¿è°±æœ€å…¨çŸ¥è¯†åŠç¬¦å· >>](https://mp.weixin.qq.com/s?__biz=MzU5ODU2NjMwNA==&mid=2247489102&idx=2&sn=35b66d5e1c64d81876e0a741b8b3a9fa&chksm=fe436281c934eb97f1f27f41a210466f2fb768a7a52d0ffb15625d66008abfa5b8a9c5091a5a&scene=27) 

# abcjsâ—ï¸

- å®˜ç½‘ï¼šhttps://www.abcjs.net/
- æ–‡æ¡£ï¼šhttps://paulrosen.github.io/abcjs/
- æ¼”ç¤ºï¼šhttps://editor.drawthedots.com/
- é…ç½®ï¼šhttps://configurator.abcjs.net/

## æ¦‚è¿°

abcjs æ˜¯ä¸€ä¸ªç”¨äºåœ¨ç½‘é¡µä¸Šæ¸²æŸ“å’Œæ’­æ”¾ABCä¹è°±çš„jsåº“ï¼Œè¿™ä¸ªåº“å¯ä»¥è®©æˆ‘ä»¬è½»æ¾çš„å°†ä¹è°±é›†æˆåˆ°æˆ‘ä»¬çš„é¡µé¢ä¸­ã€‚ABCæ˜¯ä¸€ç§ç®€å•çš„æ–‡æœ¬è¡¨ç¤ºä¹è°±çš„æ ¼å¼ï¼Œå®ƒåŒ…æ‹¬äº†éŸ³ç¬¦ã€èŠ‚æ‹ã€è°ƒæ€§ç­‰ä¿¡æ¯ã€‚

ä»¥ä¸‹æ˜¯ `abcjs` çš„ä¸€äº›ä¸»è¦ç‰¹ç‚¹å’Œç”¨é€”ï¼š

1ï¸âƒ£ **æ¸²æŸ“ABCæ ¼å¼çš„ä¹è°±**ï¼š`abcjs` å¯ä»¥å°†ABCä»£ç æ¸²æŸ“æˆå¯è§†åŒ–çš„ä¹è°±ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿåœ¨ç½‘é¡µä¸Šç›´è§‚åœ°çœ‹åˆ°è°±é¢ã€‚

2ï¸âƒ£ **æ’­æ”¾éŸ³ä¹**ï¼š`abcjs` æä¾›äº†æ’­æ”¾éŸ³ä¹çš„åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç½‘é¡µç›´æ¥å¬åˆ°é€šè¿‡ABCä»£ç è¡¨ç¤ºçš„éŸ³ä¹ã€‚

3ï¸âƒ£ **è‡ªå®šä¹‰æ ·å¼**ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡ `abcjs` çš„é…ç½®é€‰é¡¹æ¥è‡ªå®šä¹‰æ¸²æŸ“åçš„è°±é¢çš„æ ·å¼ï¼Œä»¥é€‚åº”ä¸åŒçš„ç½‘é¡µè®¾è®¡éœ€æ±‚ã€‚

4ï¸âƒ£ **æ”¯æŒä¸°å¯Œçš„ABCè¯­æ³•**ï¼š `abcjs` æ”¯æŒ ABC æ ‡å‡†ä¸­çš„è®¸å¤šè¯­æ³•å…ƒç´ ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿè¡¨è¾¾å‡ºä¸°å¯Œçš„éŸ³ä¹ä¿¡æ¯ã€‚

5ï¸âƒ£ **è·¨æµè§ˆå™¨å…¼å®¹æ€§**ï¼š `abcjs` è¢«è®¾è®¡æˆå…·æœ‰è‰¯å¥½çš„è·¨æµè§ˆå™¨å…¼å®¹æ€§ï¼Œå¯ä»¥åœ¨å„ç§ç°ä»£çš„Webæµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚

> æç¤ºï¼š
>
> 1. æ”¯æŒ IE9+ï¼ŒSafari 5.1+ ä»¥åŠæ‰€æœ‰ç°ä»£æµè§ˆå™¨
> 2. åˆæˆéŸ³é¢‘éƒ¨åˆ†åœ¨IEä¸Šæ— æ³•å·¥ä½œï¼Œä½†åœ¨æ”¯æŒ **`AudioContext.resume`** å’Œ **`Promises`** çš„ä»»ä½•ç³»ç»Ÿä¸Šéƒ½å¯ä»¥å·¥ä½œ
> 3. å®˜æ–¹æä¾›äº†ä¸€ä¸ªç¤ºä¾‹ç”Ÿæˆé¡µé¢ï¼Œæ‚¨å¯ä»¥æ ¹æ®æ‚¨çš„éœ€æ±‚å®šåˆ¶å¹¶æŸ¥çœ‹æºç ä»¥ä¾¿é›†æˆåˆ°æ‚¨çš„é¡¹ç›®ä¸­ï¼Œ[ç‚¹å‡»å‰å¾€>>](https://paulrosen.github.io/abcjs/overview/example-generator.html)
> 4. ABCç¬¦å·çš„æ ‡å‡†æ–‡æ¡£å¯ä»¥åœ¨ [è¿™é‡Œ](https://abcnotation.com/wiki/abc:standard) æŸ¥é˜…
> 5. å…³äº abcjs çš„å¸¸è§é—®é¢˜è§£ç­”ï¼Œå¯å‚è€ƒ [è¿™é‡Œ](https://paulrosen.github.io/abcjs/overview/faq.html)

## å®‰è£…

```shell
$ pnpm add abcjs
```

```tsx
import abcjs from "abcjs";
import 'abcjs/abcjs-audio.css';
```

> æ³¨æ„ï¼šæœ¬æ–‡ç¤ºä¾‹å¼•ç”¨ç‰ˆæœ¬ä¸º `v6.2.3`ï¼Œç”±äº abcjs æ¯ä¸ªç‰ˆæœ¬çš„APIè°ƒç”¨éƒ½æœ‰æ‰€å·®å¼‚ï¼Œä¸èƒ½ä¿è¯å‘åå…¼å®¹ï¼Œå› æ­¤å¦‚æœä½ æ·±å…¥äº†è§£å¹¶ç¼–å†™ä¾èµ–äºå®ƒçš„ä»£ç ï¼Œä½ éœ€è¦åœ¨æ¯æ¬¡å‡çº§ abcjs æ—¶é‡æ–°æµ‹è¯•ã€‚æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬çš„æ›´æ–°æ—¥å¿—å‚è€ƒ [è¿™é‡Œ >>](https://github.com/paulrosen/abcjs/blob/main/RELEASE.md)

## æ¸²æŸ“è°±å­ ğŸ¼

### renderAbc

ç»˜åˆ¶æ ‡å‡†éŸ³ä¹ç¬¦å·çš„ä¸»è¦å…¥å£æ˜¯ `ABCJS.renderAbc()`

è¯­æ³•å½¢å¼ï¼š

```js
const visualObjs = abcjs.renderAbc(target: Selector, code: string, visualOptions?: AbcVisualParams)
```

è¯­æ³•è§£è¯»ï¼š

- **`target`**ï¼šå®¹å™¨é€‰æ‹©å™¨ã€‚
- **`code`**ï¼šä¸€ä¸ªæ ‡å‡†çš„å­—ç¬¦ä¸²ï¼Œé‡‡ç”¨ABCæ ¼å¼ï¼Œå…³äºABCè®°è°±æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œå‚è€ƒ [è¿™é‡Œ >>](https://abcnotation.com/examples)ã€‚
- **`visualOptions`**ï¼šé…ç½®å‚æ•°ï¼Œå‚è€ƒ [è¿™é‡Œ >>](https://paulrosen.github.io/abcjs/visual/render-abc-options.html)
- **`visualObjs`**ï¼šè¿”å›å€¼æ˜¯ä¸€ä¸ªåŒ…å«æ¯ä¸ªæ›²è°ƒçš„å¯¹è±¡çš„æ•°ç»„ï¼Œå¦‚æœä½ ä¸å¯¹éŸ³ä¹è¿›è¡Œæ›´å¤šå¤„ç†ï¼Œå¯èƒ½å°±ä¸éœ€è¦è¿™ä¸ªã€‚

Abcjs æ ¼å¼å¦‚ä¸‹ï¼š

```ts
X: 1
T: Cooley's
M: 4/4
L: 1/8
Q: 120
R: reel
K: Emin
C: Li-HONGYAO
S: Copyright 2023, Li-HONGYAO.
|:D2|EB{c}BA B2 EB|~B2 AB dBAG|FDAD BDAD|FDAD dAFD|
EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2:|
|:gf|eB B2 efge|eB B2 gedB|A2 FA DAFA|A2 FA defg|
eB B2 eBgB|eB B2 defg|afe^c dBAF|DEFD E2:|
```

å…¶ä¸­ï¼š

- `X`ï¼šæ›²è°ƒï¼Œé€šå¸¸ä¸º 1
- `T`ï¼šæ›²ç›®æ ‡é¢˜
- `C`ï¼šä½œæ›²å®¶
- `M`ï¼šæ‹å·ï¼Œç¤ºä¾‹è¡¨ç¤ºæ‹å·ä¸º4/4ï¼Œå³æ¯å°èŠ‚æœ‰å››æ‹
- `L`ï¼šéŸ³ç¬¦æ—¶å€¼ï¼Œç¤ºä¾‹è¡¨ç¤ºæ¯ä¸ªå…«åˆ†éŸ³ç¬¦å ä¸€ä¸ªæ‹å­
- `R`ï¼šæ›²é£ï¼Œç¤ºä¾‹å€¼ rell æ˜¯ä¸€ç§ä¼ ç»Ÿçš„èˆæ›²å½¢å¼
- `K`ï¼šè°ƒæ€§ï¼Œç¤ºä¾‹è¡¨ç¤ºEå°è°ƒ
- `S`ï¼šç‰ˆæƒä¿¡æ¯
- `Q`ï¼šæ¯åˆ†é’Ÿå¤šå°‘æ‹ï¼Œç¤ºä¾‹è¡¨ç¤ºæ¯åˆ†é’Ÿ 120 æ‹

> **ç®€å•ä½¿ç”¨**

```tsx
import abcjs from 'abcjs';
import 'abcjs/abcjs-audio.css';
import React, { useEffect } from 'react';
const Test: React.FC = () => {
  useEffect(() => {
    abcjs.renderAbc('paper', 'X:1\nK:D\nDD AA|BBA2|\n');
  }, []);
  return (
    <div className="page">
      <div id="paper"></div>
    </div>
  );
};
export default Test;
```

#### visualOptions

@See https://paulrosen.github.io/abcjs/visual/render-abc-options.html

- `add_classes`ï¼šæ˜¯å¦å‘SVGä¸­çš„å…ƒç´ æ·»åŠ ç±»åï¼Œè¿™æ ·å¯ä»¥åœ¨ç»˜åˆ¶åæ‰¾åˆ°éŸ³ä¹çš„å„ä¸ªéƒ¨åˆ†å¹¶è¿›è¡Œæ“ä½œã€‚
- `dragging`ï¼šå¯ç”¨æ‹–æ‹½
- `dragColor`ï¼šå…ƒç´ æ‹–æ‹½æ—¶çš„é¢œè‰²
- `foregroundColor`ï¼šæ›²è°±å‰æ™¯è‰²
- `selectionColor`ï¼šå…ƒç´ é€‰ä¸­æ—¶çš„é¢œè‰²
- `initialClef`ï¼šæ˜¯å¦ä»…åœ¨ç¬¬ä¸€è¡Œæ˜¾ç¤ºè°±å·
- `lineThickness`ï¼šè°ƒæ•´æ›²è°±çº¿æ¡ç²—ç»† ï¼Œ0.3 æœ€ä½³
- `minPadding`ï¼šè®¾ç½®æ›²è°±å…ƒç´ å·¦ä¾§é—´è·ï¼ˆå¦‚æœéŸ³ç¬¦ä¹‹é—´çš„é—´è·å¤ªè¿‘ï¼Œå¯ä»¥è®¾ç½®å¤§ä¸€ç‚¹ï¼‰
- `padding[Top/Right/Bottom/Left]`ï¼šè®¾ç½®æ›²è°±å®¹å™¨ä¸Šå³ä¸‹å·¦å››ä¸ªæ–¹å‘çš„é—´è·
- `oneSvgPerLine`ï¼šæ˜¯å¦å°†æ¯ä¸ªè°±è¡¨ç³»ç»Ÿæ¸²æŸ“åˆ°ä¸åŒçš„SVGä¸­ï¼Œè¿™æ ·å¯ä»¥æ›´è½»æ¾åœ°ä½¿ç”¨CSSè¿›è¡Œæ§åˆ¶ï¼Œå¹¶ä¸”å¯ä»¥å®ç°æ¸…æ™°çš„åˆ†é¡µã€‚
- `responsive`ï¼šæ”¹å˜åŒ…å›´å…ƒç´ å’ŒSVGå…ƒç´ çš„æ ·å¼ï¼Œä»è€Œå¯¼è‡´SVGéšç€çˆ¶å…ƒç´ å®½åº¦çš„å˜åŒ–è€Œå¢å¤§å’Œç¼©å°ã€‚
- `scrollHorizontal`ï¼šå¦‚æœéŸ³ä¹å®½åº¦è¶…è¿‡è§†å£ï¼Œæ˜¯å¦åº”è¯¥æœ‰æ°´å¹³æ»šåŠ¨æ¡
- `staffwidth`ï¼šæ›²è°±æ‰€å å®½åº¦ï¼Œä»¥åƒç´ ä¸ºå•ä½ã€‚å®ƒä¸ä¼šæ”¹å˜å¸ƒå±€çš„ä½ç½®ï¼Œåªä¼šæ”¹å˜å…ƒç´ ä¹‹é—´çš„é—´è·ã€‚
- `tablatures`ï¼šåœ¨æ ‡å‡†éŸ³ä¹è¾“å‡ºä¸‹æ–¹æ·»åŠ ä¸€ä¸ªç±»ä¼¼å‰ä»–è°±çš„è°±è¡¨
- `clickListener`ï¼šã€å›è°ƒå‡½æ•°ã€‘ï¼Œç‚¹å‡»éŸ³ç¬¦æ—¶è§¦å‘
- `afterParsing`ï¼šã€å›è°ƒå‡½æ•°ã€‘ï¼Œåœ¨è§£æ ABC å­—ç¬¦ä¸²ä¹‹åã€åœ¨éŸ³ä¹å¼€å§‹æ˜¾ç¤ºæˆ–ä¸ºéŸ³é¢‘è®¾ç½®ä¹‹å‰è°ƒç”¨
- ...

#### visualObjs

@See https://paulrosen.github.io/abcjs/visual/render-abc-result.html#visualobjs

è°ƒç”¨ `renderAbc()` å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆTuneObjectï¼‰æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡ä»£è¡¨ä¸€æ®µæ›²å­ã€‚å¦‚æœä½ ä¸å¯¹éŸ³ä¹è¿›è¡Œæ›´å¤šçš„å¤„ç†ï¼Œå¯èƒ½ä¸éœ€è¦è¿™ä¸ªã€‚è¿™æ˜¯éœ€è¦ä¼ é€’ç»™ `TimingCallbacks` å¯¹è±¡å’Œ `CreateSynth` å¯¹è±¡çš„å†…å®¹ã€‚

ç”±äºè¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†åœ¨è®¸å¤šæƒ…å†µä¸‹ä½ çŸ¥é“åªä¼ é€’äº†ä¸€ä¸ªæ›²è°ƒï¼Œå› æ­¤ï¼Œä½ é€šå¸¸ä¼šè¿™æ ·åšï¼š

```js
const visualObj = abcjs.renderAbc('paper', 'X:1\nK:D\nDD AA|BBA2|\n')[0]
```

`visualObj` åŒ…å«ä¸€äº›æ›²è°ƒæ•°æ®å’Œæ–¹æ³•

##### data

- `formatting`ï¼šæ›²è°±æ ¼å¼ç›¸å…³ä¿¡æ¯

- `lines`ï¼šæ›²è°±è¡Œä¿¡æ¯ï¼ŒåŒ…å«æ¯ä¸€è¡Œçš„éŸ³ç¬¦åŠå…¶ä»–ç¬¦å·ç­‰ä¿¡æ¯ã€‚ã€‚

- `media`ï¼šåª’ä½“

- `metaText`ï¼šè¿™æ˜¯æ‰€æœ‰ä¸éŸ³ä¹æ— å…³çš„å…ƒç´ ï¼ˆæ¯”å¦‚æ›²è°±æ ‡é¢˜å’Œæè¿°ï¼‰ï¼ŒåŒ…æ‹¬éŸ³ä¹å¼€å§‹å‰æ˜¾ç¤ºçš„æ–‡æœ¬å’ŒéŸ³ä¹ç»“æŸåæ˜¾ç¤ºçš„æ–‡æœ¬ã€‚

- `meter`ï¼šæ‹å·ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œ3/4 æ‹å­è¿”å› {num: 3, den: 4}

  - åˆ†å­ï¼šæ¯ä¸€èŠ‚æœ‰å¤šå°‘æ‹

  - åˆ†æ¯ï¼šä»¥å‡ åˆ†éŸ³ç¬¦ä¸ºä¸€æ‹

- ...

##### Methods

- `getBarLength()`

  è·å–éŸ³ç¬¦æ—¶å€¼å•ä½ï¼Œå…¶ä¸­å…¨éŸ³ç¬¦ä¸º1ã€‚

  æ­¤å‡½æ•°è¿”å›ã€ä¸€å°èŠ‚ã€‘çš„æ—¶å€¼ã€‚ä¾‹å¦‚ï¼Œ4/4 æ‹è¿”å›1ï¼Œ3/4 æ‹è¿”å›0.75ï¼Œ6/8 æ‹è¿”å›0.75ã€‚

- `getBeatLength()`

  éŸ³ç¬¦æ—¶å€¼çš„å•ä½æ˜¯å…¨éŸ³ç¬¦ä¸º1ã€‚
  
  æ­¤å‡½æ•°è¿”å›ã€ä¸€æ‹ã€‘çš„æ—¶å€¼ã€‚ä¾‹å¦‚ï¼Œåœ¨4/4æ‹å­ä¸­ï¼Œè¿”å›0.25ï¼Œåœ¨6/8æ‹å­ä¸­ï¼Œè¿”å›0.375ï¼Œå› ä¸ºä¸€æ‹ç­‰äºä¸‰ä¸ªå…«åˆ†éŸ³ç¬¦ã€‚
  
- `getBeatsPerMeasure()`
  
  è¿”å›ä¸€å°èŠ‚ä¸­ã€æœ‰å¤šå°‘æ‹ã€‘ã€‚ä¾‹å¦‚ï¼Œåœ¨4/4æ‹å­ä¸­ï¼Œè¿”å›4ï¼Œåœ¨6/8æ‹å­ä¸­ï¼Œè¿”å›2ï¼Œå› ä¸ºä¸€æ‹ç­‰äºä¸‰ä¸ªå…«åˆ†éŸ³ç¬¦ã€‚
  
- `getBpm()`
  
  æ¯åˆ†é’Ÿæœ‰å¤šå°‘æ‹ï¼Œbpmä¸»è¦ç”¨äºæ§åˆ¶é€Ÿåº¦ï¼Œæ•°å€¼è¶Šå¤§ï¼Œé€Ÿåº¦è¶Šå¿«ï¼Œé»˜è®¤é€Ÿåº¦180ã€‚
  
- `getMeterFraction()`
  
  æ‹å·ä¿¡æ¯ï¼Œè¿”å›å€¼åŒ `meter` å±æ€§
  
- `getPickupLength()`
  
  éŸ³ç¬¦æ—¶å€¼çš„å•ä½æ˜¯å…¨éŸ³ç¬¦ä¸º1ã€‚å¦‚æœç¬¬ä¸€å°èŠ‚ä¸æ˜¯å®Œæ•´çš„å°èŠ‚ï¼Œåˆ™è¿™æ˜¯ç¬¬ä¸€å°èŠ‚çš„é•¿åº¦ã€‚ç„¶åå®ƒè¢«è§†ä¸ºå‰å¥éŸ³ç¬¦ã€‚
  
- `getKeySignature()`
  
  è¿”å›å¸¦æœ‰æ‰€æœ‰éƒ¨åˆ†æ‹†åˆ†çš„è°ƒå·çš„å†…éƒ¨è¡¨ç¤ºå½¢å¼ã€‚
  
- `getElementFromChar(charIndex)`
  
  `charIndex` æ˜¯åŸå§‹ ABC ä¸­çš„å­—ç¬¦ä½ç½®ã€‚é€šè¿‡è°±è¡¨æœç´¢ä¸è¯¥å­—ç¬¦åŒ¹é…çš„å…ƒç´ ã€‚å¦‚æœä¼ å…¥ééŸ³ç¬¦å…ƒç´ çš„ç´¢å¼•ï¼Œåˆ™è¿”å› nullã€‚
  
- `getTotalBeats`
  
  åœ¨è°ƒç”¨ `setUpAudio` ä¹‹å‰è¿”å› undefinedï¼Œç„¶åè¿”å›æ›²è°ƒçš„æ€»æ‹æ•°ã€‚
  
- `getTotalTime`
  
  åœ¨è°ƒç”¨ `setUpAudio` ä¹‹å‰è¿”å› undefinedï¼Œç„¶åè¿”å›ä»¥ `setUpAudio` ä¸­æŒ‡å®šçš„é€Ÿåº¦æ’­æ”¾æ›²è°ƒæ‰€éœ€çš„æ€»ç§’æ•°ã€‚
  
- `millisecondsPerMeasure()`
  
  è·å–æ¯ä¸€å°èŠ‚çš„æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼ˆä½¿ç”¨æ¯åˆ†é’Ÿæ‹æ•°å’Œæ¯å°èŠ‚æ‹æ•°è¿›è¡Œè®¡ç®—ï¼‰
  
- `setUpAudio()`
  
  å¦‚æœæ‚¨æ²¡æœ‰ä½¿ç”¨å†…ç½®çš„synthï¼Œä½†æ˜¯æ‚¨ä»ç„¶éœ€è¦synthæä¾›çš„ä¿¡æ¯ï¼Œå¯ä»¥è°ƒç”¨æ­¤å‡½æ•°ã€‚å¦‚æœæ‚¨æ²¡æœ‰è¦†ç›–BPMæˆ–å¯ä»¥åœ¨synthè°ƒç”¨ä¸­è®¾ç½®çš„ä»»ä½•å…¶ä»–å†…å®¹ï¼Œåˆ™å¯ä»¥ä¸å¸¦å‚æ•°åœ°è°ƒç”¨å®ƒã€‚å¦åˆ™ï¼ŒæŒ‡å®šè¦è¦†ç›–çš„é¡¹ã€‚
  
  æ­¤å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åºåˆ—æ•°æ®çš„æ•°ç»„ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ‚¨ä¸éœ€è¦æ­¤ä¿¡æ¯ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒå¯èƒ½å¯¹ååºå¤„ç†æœ‰ç”¨ã€‚

### æ·»åŠ ç±»å

@See https://paulrosen.github.io/abcjs/visual/classes.html

åœ¨æ¸²æŸ“æ›²è°±æ—¶ï¼Œå¦‚æœé…ç½® `{ add_classes: true }`ï¼Œé‚£ä¹ˆåœ¨æ›²è°±ä¸­çš„æ‰€æœ‰å…ƒç´ å°†ä¼šè¢«æ·»åŠ å¯¹åº”çš„ç±»åã€‚å¦‚æœä½ æƒ³æŸ¥çœ‹å„ç±»ååœ¨æ›²è°±ä¸­çš„ä½ç½®ï¼Œå¯ä»¥å‚è€ƒ [è¿™é‡Œ >>](https://paulrosen.github.io/abcjs/visual/classes.html#found-classes)ã€‚

> æç¤ºï¼šå½“ä½ åœ¨ **Found Classes** é€‰æ‹©å¯¹åº”çš„ç±»åæ—¶ï¼Œå¯ä»¥å¾€ä¸Šæ»‘è‡³ **Test Tune** æŸ¥çœ‹å…¶åœ¨æ›²è°±ä¸­å¯¹åº”çš„ä½ç½®ã€‚

äº†è§£äº†å¯¹åº”çš„ç±»åï¼Œä½ å¯ä»¥é€šè¿‡ CSS æ–¹ä¾¿çš„æ§åˆ¶å…ƒç´ çš„æ ·å¼ã€‚

å¦‚æœä½ æƒ³æŠŠæ‰€æœ‰çš„é¢œè‰²éƒ½æ¢æˆå¦ä¸€ç§é¢œè‰²ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š

```css
svg {
  fill: orange;
  stroke: orange;
}
```

å¦‚æœä½ æƒ³æ§åˆ¶çš„æ›´ç»†è…»ï¼Œæ¯”å¦‚ï¼Œåªè°ƒæ•´æ ‡é¢˜çš„æ ·å¼ï¼Œå¯ä»¥ç»“åˆç±»åè®¾ç½®ï¼š

```less
svg .abcjs-title {
  fill: orange;
  stroke: orange;
}
```

### ç›‘å¬ç‚¹å‡»

@See https://paulrosen.github.io/abcjs/visual/click-listener.html

å¦‚æœæ‚¨æƒ³è·å–æœ‰å…³ç”¨æˆ·ç‚¹å‡»çš„ä¿¡æ¯ï¼Œå¯ä»¥è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```tsx
abcjs.renderAbc('paper', code, {
  add_classes: true,
  clickListener: (
    abcElem: abcjs.AbcElem,
    tuneNumber: number,
    classes: string,
    analysis: abcjs.ClickListenerAnalysis,
    drag: abcjs.ClickListenerDrag,
  ) => {},
});
```

å‚æ•°è§£è¯»ï¼š

- `abcElem`ï¼šä¸æ‰€ç‚¹å‡»å…ƒç´ å…³è”çš„å†…éƒ¨å¯¹è±¡

- `tuneNumber`ï¼šå¦‚æœåŸå§‹çš„ abcString ä¸­æœ‰å¤šä¸ªæ›²è°ƒï¼Œè¿™å°†æŠ¥å‘Šç‚¹å‡»çš„æ˜¯å“ªä¸ªæ›²è°ƒ

- `classes`ï¼šè¢«ç‚¹å‡»å…ƒç´ çš„ CSS ç±» *ï¼ˆæ³¨ï¼šè¿™éœ€è¦ä½¿ç”¨å‚æ•° `{ add_classes: true }` ï¼‰*

- `analysis`ï¼šç‚¹å‡»å…ƒç´ æ‰€åŒ…å«çš„ä¿¡æ¯å¯¹è±¡

- `drag`ï¼šæ‹–æ‹½ç»“æœ

### é€‰æ‹©å¹¶æ‹–æ‹½éŸ³ç¬¦

@See https://paulrosen.github.io/abcjs/visual/dragging.html

#### Dragging

ä½¿ç”¨é€‰é¡¹ï¼š

```tsx
abcjs.renderAbc(..., ..., { 
   /** å…ƒç´ æ‹–æ‹½æ—¶çš„é¢œè‰² */
   dragColor: '#4169E1',
   /** å…ƒç´ é€‰ä¸­æ—¶çš„é¢œè‰² */
   selectionColor: '#FFD700',
   /** å¯ç”¨æ‹–æ‹½ */
   dragging: true, 
   /** äº‹ä»¶ç›‘å¬ */
   clickListener: function() {...} 
})
```

ç”¨æˆ·å¯ä»¥ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ˜¯å¯æ‹–åŠ¨å…ƒç´ ï¼Œåˆ™å¯ä»¥åœ¨è§†è§‰ä¸Šç§»åŠ¨å®ƒã€‚å½“ç”¨æˆ·å®Œæˆç§»åŠ¨å…ƒç´ æ—¶ï¼Œå°†è°ƒç”¨ç‚¹å‡»ç›‘å¬å™¨ã€‚åº•å±‚çš„éŸ³ä¹ä¸ä¼šå› ç”¨æˆ·çš„æ“ä½œè€Œæ”¹å˜ã€‚å¦‚æœç”¨æˆ·è¿›è¡Œäº†æ›´æ”¹ï¼ŒclickListener å‡½æ•°åº”ä¿®æ”¹ ABC å­—ç¬¦ä¸²å¹¶é‡æ–°æ¸²æŸ“ã€‚

clickListener å‡½æ•°ä¸­çš„ç¬¬äº”ä¸ªå‚æ•°æ˜¯æ‹–åŠ¨çš„ç»“æœï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„å¯¹è±¡ï¼š

```ts
{
  step: number,
  setSelection: function,
  index: number, 
  max: number,
}
```

å…¶ä¸­ï¼š

- `step`ï¼šéŸ³ç¬¦è¢«æ‹–åŠ¨çš„è§†è§‰ä½ç½®æ•°ã€‚è´Ÿæ•°è¡¨ç¤ºéŸ³ç¬¦è¢«æ‹‰å¹³ï¼Œæ­£æ•°è¡¨ç¤ºéŸ³ç¬¦è¢«æ‹‰å°–ã€‚è¿™æ˜¯ä¸€ä¸ªçº¯ç²¹çš„è§†è§‰è®¡æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœéŸ³ç¬¦åœ¨ä¸€æ¡çº¿ä¸Šï¼Œè¿”å› 1ï¼Œåˆ™éŸ³ç¬¦ç°åœ¨å…¶ä¸Šæ–¹çš„ç©ºæ ¼ä¸Š
- `setSelection`ï¼šé€‰æ‹©å‡½æ•°çš„å›è°ƒï¼Œæ‚¨å¯ä»¥è°ƒç”¨å®ƒä»¥ç¼–ç¨‹æ–¹å¼æ›´æ”¹é€‰æ‹©
- `index`ï¼šæ˜¯é€‰å®šçš„éŸ³ç¬¦é¢æ—¥å¿—
- `max`ï¼šéŸ³ä¹ä¸­å¯é€‰æ‹©é¡¹ç›®çš„æ•°é‡

#### æŒ‡å®šå¯é€‰æ‹©çš„å†…å®¹

ä»¥ä¸‹éŸ³ä¹é¡¹ç›®çš„ç±»åˆ«å¯ä»¥ç‹¬ç«‹è®¾ç½®ä¸ºå¯é€‰æ‹©ï¼š

```
"author"
"bar"
"brace"
"clef"
"composer"
"dynamicDecoration"
"ending"
"extraText"
"freeText"
"keySignature"
"note"
"part"
"partOrder"
"rhythm"
"slur"
"subtitle"
"tempo"
"timeSignature"
"title"
"unalignedWords"
"voiceName"
```

ä½¿ç”¨é€‰é¡¹ï¼š

```ts
abcjs.renderAbc(..., ..., { selectTypes: [] })
```

> æç¤ºï¼šä¸ªäººè®¤ä¸ºï¼Œabcjs çš„æ‹–æ‹½æ•ˆæœå¹¶ä¸æ˜¯å¾ˆå‹å¥½ã€‚

### å‰ä»–è°±

@See https://paulrosen.github.io/abcjs/visual/tablature.html

> æç¤ºï¼šå› ä¸ºé¡¹ç›®ä¸­æ²¡æœ‰ç”¨åˆ°å‰ä»–è°±ç›¸å…³çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç‚¹å‡»ä¸Šæ–¹çš„é“¾æ¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£çš„æè¿°ã€‚

### ä»£ç ç¤ºä¾‹

```tsx
import abcjs from 'abcjs';
import 'abcjs/abcjs-audio.css';
import React, { useEffect } from 'react';

const abcString = `
X: 1
T: Cooley's
M: 4/4
L: 1/8
R: reel
K: Emin
C: Li-HONGYAO
S: Copyright 2023, Li-HONGYAO.
|:D2|EB{c}BA B2 EB|~B2 AB dBAG|FDAD BDAD|FDAD dAFD|
EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2:|
|:gf|eB B2 efge|eB B2 gedB|A2 FA DAFA|A2 FA defg|
eB B2 eBgB|eB B2 defg|afe^c dBAF|DEFD E2:|
`;

const Test: React.FC = () => {
  const visualOptions: abcjs.AbcVisualParams = {
    /** æ˜¯å¦æ·»åŠ ç±»åï¼Œä½ å¯ä»¥åŸºäºç±»åè¿›è¡Œæ ·å¼è®¾ç½®ã€ç§»åŠ¨æˆ–éšè—å…ƒç´  */
    add_classes: true,
    /** å¯ç”¨æ‹–æ‹½ */
    dragging: true,
    /** å…ƒç´ æ‹–æ‹½æ—¶çš„é¢œè‰² */
    dragColor: '#4169E1',
    /** å…ƒç´ é€‰ä¸­æ—¶çš„é¢œè‰² */
    selectionColor: '#FFD700',
    /** æ›²è°±å‰æ™¯è‰² */
    foregroundColor: '#333333',
    /** æ˜¯å¦ä»…åœ¨ç¬¬ä¸€è¡Œæ˜¾ç¤ºè°±å· */
    initialClef: false,
    /** è°ƒæ•´æ›²è°±çº¿æ¡ç²—ç»† */
    lineThickness: 0.3,
    /** è®¾ç½®æ›²è°±å…ƒç´ å·¦ä¾§é—´è·ï¼ˆå¦‚æœéŸ³ç¬¦ä¹‹é—´çš„é—´è·å¤ªè¿‘ï¼Œå¯ä»¥è®¾ç½®å¤§ä¸€ç‚¹ï¼‰ */
    minPadding: 10,
    /** æ˜¯å¦åº”å°†æ¯ä¸ªè°±è¡¨ç³»ç»Ÿæ¸²æŸ“åˆ°ä¸åŒçš„SVGä¸­ï¼Œè¿™æ ·å¯ä»¥æ›´è½»æ¾åœ°ä½¿ç”¨CSSè¿›è¡Œæ§åˆ¶ï¼Œå¹¶ä¸”å¯ä»¥å®ç°æ¸…æ™°çš„åˆ†é¡µã€‚ */
    oneSvgPerLine: true,
    /** ä½¿SVGçš„å¤§å°é€‚åˆå­—æ¯å¤§å°çš„åŒºåŸŸ */
    print: true,
    /** æ˜¯å¦ä»…æ¸²æŸ“å¤´éƒ¨ä¿¡æ¯ */
    header_only: false,
    /** åœ¨é‡åˆ°è­¦å‘Šä¹‹å‰ï¼Œåªè§£ææ›²è°ƒ */
    stop_on_warning: true,
    /** ç¼©æ”¾æ¯”ä¾‹ */
    scale: 1,
    /** å¸ƒå±€å®½åº¦ */
    staffwidth: 1000,

    /** å›è°ƒå‡½æ•°ï¼šç‚¹å‡»éŸ³ç¬¦æ—¶è§¦å‘ */
    clickListener: (
      abcElem: abcjs.AbcElem,
      tuneNumber: number,
      classes: string,
      analysis: abcjs.ClickListenerAnalysis,
      drag: abcjs.ClickListenerDrag,
    ) => {
      console.log(abcElem, tuneNumber, classes, analysis, drag);
    },
  };

  useEffect(() => {
    // -- æ¸²æŸ“æ›²è°±
    const visualObj = abcjs.renderAbc('paper', abcString, visualOptions)[0];
    console.log(visualObj);
  }, []);
  return (
    <div className="page">
      <div id="paper"></div>
    </div>
  );
};

export default Test;

```

æ¸²æŸ“æ•ˆæœï¼š

![](./IMGS/abcjs_visualObj.jpg)

## åˆæˆéŸ³æ•ˆ ğŸ”‰

@See https://paulrosen.github.io/abcjs/audio/synthesized-sound.html

æ›²è°±æ¸²æŸ“å®Œæˆä¹‹åï¼Œä½ å¯èƒ½å¸Œæœ›æ’­æ”¾æ›²è°±é‡Œé¢çš„éŸ³ç¬¦ï¼Œabcjs ä¸ºæˆ‘ä»¬æä¾›äº†å¤šç§å®ç°æ–¹å¼ï¼Œä»¥ä¾¿é€‚åº”æˆ‘ä»¬çš„éœ€æ±‚ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ ä¹Ÿå¯èƒ½ä¼šæ­é…å‡ ç§æ–¹å¼ä¸€èµ·ä½¿ç”¨ä»¥å®ç°å¤æ‚çš„éœ€æ±‚åœºæ™¯ï¼Œæ¥ä¸‹æ¥æˆ‘å°†ä¼šé€ä¸€ä»‹ç»ã€‚

æµè§ˆå™¨å…¼å®¹æ€§å’Œè¦æ±‚ï¼š

1. æ­¤åŠŸèƒ½åœ¨æ”¯æŒAudioContextã€AudioContext.resumeå’ŒPromisesçš„ä»»ä½•æµè§ˆå™¨ä¸­éƒ½å¯ç”¨ï¼Œä¸åŒ…æ‹¬IEã€‚
2. è¦æ’­æ”¾å£°éŸ³ï¼Œéœ€è”ç½‘è·å–å£°éŸ³å­—ä½“ï¼ˆsound fontsï¼‰ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å°†å…¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚é»˜è®¤çš„å£°éŸ³å­—ä½“æ¥è‡ª [è¿™ä¸ª](https://github.com/paulrosen/midi-js-soundfonts) gitHub ä»“åº“ã€‚

è¿™é‡Œæœ‰ä¸¤ä¸ªç¤ºä¾‹ï¼Œä»…ä¾›å‚è€ƒï¼š

1. [Basic Synth](https://raw.githubusercontent.com/paulrosen/abcjs/main/examples/basic-synth.html)ï¼šåŸºç¡€ç¤ºä¾‹ï¼Œäº†è§£åˆ¶ä½œå£°éŸ³çš„æœ€ç®€å•æ–¹æ³•
2. [Full Syhtn](https://raw.githubusercontent.com/paulrosen/abcjs/main/examples/full-synth.html)ï¼šè¿™æ˜¯ä¸€ä¸ªåŒ…å«éŸ³é¢‘æ§ä»¶çš„ç¤ºä¾‹

### 1ï¸âƒ£ CreateSynth

è¿™ä¸ªæ–¹æ³•ä¸»è¦ç”¨äºåˆ›å»ºéŸ³é¢‘æ’­æ”¾çš„ç¼“å†²å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡è´Ÿè´£å°†ABCæ›²è°±è½¬æ¢ä¸ºéŸ³é¢‘ï¼Œå¹¶æä¾›æ§åˆ¶éŸ³é¢‘æ’­æ”¾çš„æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡æ¥é…ç½®å’Œæ§åˆ¶éŸ³é¢‘çš„ç”Ÿæˆå’Œæ’­æ”¾ã€‚

> æç¤ºï¼šæ‰€æœ‰éŸ³é¢‘æ’­æ”¾çš„å®ç°éƒ½éœ€è¦ä¸€ä¸ªCreateSynth

ä½¿ç”¨æ­¥éª¤ï¼š

1. è°ƒç”¨ `CreateSynth()` åˆ›å»ºå®ä¾‹
2. è°ƒç”¨ `init()` æ–¹æ³•åŠ è½½æ‰€éœ€éŸ³ç¬¦
3. è°ƒç”¨ `prime()` æ–¹æ³•åˆ›å»ºéŸ³é¢‘æ’­æ”¾ç¼“å†²åŒº
4. å¯¹éŸ³é¢‘è¿›è¡Œæ“ä½œï¼šå¦‚æ’­æ”¾ã€æš‚åœã€åœæ­¢ç­‰

> æç¤ºï¼šè¿™ä¸ªAPIä¸»è¦ç”¨äºæ— è§†å›¾æ§ä»¶çš„éŸ³é¢‘æ’­æ”¾ï¼Œç¼ºé™·æ˜¯æ— æ³•è®¾ç½® CusorControl  ç›‘å¬éŸ³é¢‘äº‹ä»¶ï¼Œä¸è¿‡å¯ç»“åˆ timingCallbacks å¼¥è¡¥è¿™ä¸ªç¼ºé™·ã€‚

#### API

```tsx
const synth = new abcjs.synth.CreateSynth();
```

##### init(synthOptions)

CreateSynth åï¼Œå¿…é¡»é¦–å…ˆè°ƒç”¨ `init` æ–¹æ³•ï¼Œ è¯¥æ–¹æ³•å°†åŠ è½½æ‰€æœ‰æ‰€éœ€çš„éŸ³ç¬¦ï¼Œå¹¶åœ¨å®ƒä»¬åŠ è½½å®Œæˆæ—¶è¿”å›ä¸€ä¸ª Promiseï¼Œè¿™å¯èƒ½éœ€è¦ä¸€å®šçš„æ—¶é—´æ‰èƒ½å®Œæˆï¼Œä¸è¿‡ï¼Œç”±äºéŸ³ç¬¦è¢«ç¼“å­˜ï¼Œç¬¬äºŒæ¬¡ä½¿ç”¨ç›¸ä¼¼éŸ³ç¬¦çš„æ›²è°±åˆ›å»º `CreateSynth` æ—¶ï¼Œå°†èŠ±è´¹æ›´å°‘çš„æ—¶é—´ã€‚

> æç¤ºï¼šå½“ç”¨æˆ·åœ¨é¡µé¢ä¸Šè¿›è¡Œæ‰‹åŠ¿ä¹‹å‰ï¼Œä¸èƒ½è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºè¯¥æ–¹æ³•ä¼šå¼•ç”¨ä¸€ä¸ª `AudioContext`ã€‚

synthOptions é…ç½®ä¸‹å¦‚ä¸‹ï¼š

- `audioContext`ï¼šéŸ³é¢‘ä¸Šä¸‹æ–‡
- `visualObj`ï¼šrenderAbc è¿”å›çš„ç»“æœ
- `sequence`ï¼šæ‰‹åŠ¨åˆ›å»ºéŸ³é¢‘
- `millisecondsPerMeasure`ï¼šæ’­æ”¾é€Ÿåº¦ï¼Œè®¾ç½®è¯¥å€¼å°†å¿½ç•¥ abc å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„é€Ÿåº¦ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼‰
- `options`ï¼š
  - `soundFontUrl`ï¼šå£°éŸ³å­—ä½“å…¬å…±URL
    - https://paulrosen.github.io/midi-js-soundfonts/abcjs/
    - http://gleitz.github.io/midi-js-soundfonts/FluidR3_GM å‚è€ƒ [è¿™é‡Œ >>](https://github.com/paulrosen/midi-js-soundfonts)
  - ...

> æç¤ºï¼šæ›´å¤šé…ç½®é¡¹ï¼Œå‚è€ƒ [è¿™é‡Œ>>](https://paulrosen.github.io/abcjs/audio/synthesized-sound.html#init-synthoptions)

##### prime()

åˆ›å»ºå®é™…çš„ç¼“å†²åŒº - ç”±äºç°åœ¨æ‰€æœ‰éŸ³ç¬¦éƒ½å·²é¢„åŠ è½½ï¼Œå› æ­¤å®ƒä¸éœ€è¦ç½‘ç»œè¿æ¥ã€‚

```tsx
synth.init(...).then(() => {
    synth.prime().then((response) => {
		console.log(response.status)
        ...
    });
});
```

> æç¤ºï¼š`response.status` é€šå¸¸ä¸ºâ€œrunningâ€ã€‚ä½†åœ¨iOSä¸Šï¼Œæœ‰æ—¶å¯èƒ½æ˜¯â€œsuspendedâ€æˆ–â€œinterruptedâ€ï¼Œå¼€å‘æ—¶éœ€æ³¨æ„åˆ¤æ–­ã€‚

##### methods

- `start()`ï¼šå¯åŠ¨éŸ³é¢‘

- `pause()`ï¼šæš‚åœéŸ³é¢‘
- `resume()`ï¼šæ¢å¤æ’­æ”¾
- `stop()`ï¼šåœæ­¢æ’­æ”¾å£°éŸ³å¹¶å°†è¿›åº¦é‡ç½®ä¸ºå£°éŸ³æ–‡ä»¶çš„å¼€å¤´
- `seek(percent, units)`ï¼šæ›´æ”¹æ’­æ”¾ä½ç½®ï¼Œå¯ä»¥åœ¨å£°éŸ³å½“å‰æ’­æ”¾æˆ–æœªæ’­æ”¾æ—¶è°ƒç”¨
- `download()`ï¼šä¸‹è½½ï¼Œæ­¤æ–¹æ³•å¹¶ä¸ç›´æ¥ä¸‹è½½ï¼Œè€Œæ˜¯è¿”å› `audioBuffer`

#### ä»£ç ç¤ºä¾‹

```tsx
import abcjs from 'abcjs';
import 'abcjs/abcjs-audio.css';
import React, { useEffect, useRef } from 'react';

const abcString = `
X: 1
T: Cooley's
M: 4/4
L: 1/8
R: reel
K: Emin
C: Li-HONGYAO
S: Copyright 2023, Li-HONGYAO.
|:D2|EB{c}BA B2 EB|~B2 AB dBAG|FDAD BDAD|FDAD dAFD|
EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2:|
|:gf|eB B2 efge|eB B2 gedB|A2 FA DAFA|A2 FA defg|
eB B2 eBgB|eB B2 defg|afe^c dBAF|DEFD E2:|
`;

const Test: React.FC = () => {
  // -- ç›¸å…³å¼•ç”¨
  const ref_visualObj = useRef<abcjs.TuneObject>();
  const ref_synth = useRef<abcjs.MidiBuffer>();

  // -- æ¸²æŸ“å‚æ•°
  const visualOptions: abcjs.AbcVisualParams = {
    add_classes: true,
  };

  // -- åˆæˆéŸ³æ•ˆ
  const syntheticSound = (): Promise<void> => {
    return new Promise((resolve, reject) => {
      // æ¯æ¬¡åˆæˆä¹‹å‰ï¼Œåˆ¤æ–­å½“å‰æ˜¯å¦æ­£åœ¨æ’­æ”¾éŸ³é¢‘
      const isRunning = ref_synth.current?.getIsRunning();
      // å¦‚æœæ­£åœ¨æ’­æ”¾åˆ™åœæ­¢
      isRunning && ref_synth.current?.stop();
      // åˆå§‹åŒ–
      const uri = 'http://gleitz.github.io/midi-js-soundfonts/FluidR3_GM';
      ref_synth.current
        ?.init({
          audioContext: abcjs.synth.activeAudioContext(),
          visualObj: ref_visualObj.current,
          options: { soundFontUrl: uri },
        })
        .then((results) => {
          console.log(results);
          ref_synth.current
            ?.prime()
            .then((response) => {
              console.log(response.status);
              resolve();
            })
            .catch((error) => reject(error));
        })
        .catch((error) => reject(error));
    });
  };

  useEffect(() => {
    // -- æ¸²æŸ“äº”çº¿è°±
    ref_visualObj.current = abcjs.renderAbc('paper', abcString, visualOptions)[0];
    // -- åˆ›å»ºéŸ³é¢‘åˆæˆæ§åˆ¶å™¨
    ref_synth.current = new abcjs.synth.CreateSynth();
  }, []);

  return (
    <div className="page">
      <div id="paper"></div>
      <button
        onClick={async () => {
          const isRunning = ref_synth.current?.getIsRunning();
          isRunning && ref_synth.current?.stop();
          await syntheticSound();
          ref_synth.current?.start();
        }}
      >
        æ’­æ”¾
      </button>
      <button onClick={() => ref_synth.current?.pause()}>æš‚åœ</button>
      <button onClick={() => ref_synth.current?.resume()}>æ¢å¤</button>
      <button onClick={() => console.log(ref_synth.current?.download())}>ä¸‹è½½</button>
    </div>
  );
};

export default Test;
```

### 2ï¸âƒ£ SynthController

åˆ›å»ºä¸€ä¸ªéŸ³é¢‘åˆæˆæ§åˆ¶å™¨å¯¹è±¡ï¼ˆå¯è§†åŒ–å°éƒ¨ä»¶ï¼Œä½ å¯ä»¥ç†è§£æˆåœ¨ \<audio> æ ‡ç­¾ä¸ŠåŠ äº†ä¸€ä¸ª controls å±æ€§ï¼‰ï¼Œå…è®¸ç”¨æˆ·æ§åˆ¶æ’­æ”¾ï¼ŒåŒ…æ‹¬æ’­æ”¾å’Œåœæ­¢æŒ‰é’®ã€è¿›åº¦æ¡ç­‰ã€‚

æ„é€ å‡½æ•°å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è°ƒç”¨ï¼ŒåŒ…æ‹¬åœ¨å¾ˆå¤šå†…å®¹éƒ½å°šæœªåˆå§‹åŒ–ä¹‹å‰ï¼š

```tsx
const synthControl = new abcjs.synth.SynthController();
```

#### API

##### load(selector, cursorControl, visualOptions)

åœ¨DOMåŠ è½½åï¼Œåº”è¯¥è°ƒç”¨æ­¤å‡½æ•°æ¥åˆå§‹åŒ–åŒ…å«â€œæ’­æ”¾â€ç­‰æŒ‰é’®çš„å¯è§†åŒ–å°éƒ¨ä»¶ã€‚

- `selector`ï¼šCSSé€‰æ‹©å™¨ï¼Œç»‘å®š audio æ ‡ç­¾
- `cursorControl`ï¼šè¿™æ˜¯ä¸€ä¸ªå¯é€‰å¯¹è±¡ï¼Œåœ¨å‘ç”Ÿåº”è¯¥ç§»åŠ¨å…‰æ ‡çš„äº‹ä»¶æ—¶ä¼šæ”¶åˆ°å›è°ƒ
- `visualOptions`ï¼šç”¨äºæ§åˆ¶éŸ³é¢‘æ§ä»¶æ˜¾ç¤ºçš„é…ç½®é¡¹

> æç¤ºï¼šè™½ç„¶å¯ä»¥å¤šæ¬¡è°ƒç”¨æ­¤å‡½æ•°ï¼Œä½†é€šå¸¸åªåœ¨åˆå§‹åŒ–æœŸé—´è°ƒç”¨ä¸€æ¬¡ã€‚

##### disable(isDisabled)

æ˜¯å¦ç¦ç”¨æ§ä»¶ï¼Œé€šå¸¸ç”¨äºåœ¨åŠ è½½æ–°æ›²è°±ä¹‹å‰ç¦ç”¨è§†è§‰æ§ä»¶ã€‚

##### setTune(visualObj, userAction, audioParams)

åœ¨ ã€æ¯æ¬¡ã€‘æœ‰æ–°æ›²è°±å‡†å¤‡å¥½åŠ è½½åˆ°æ’­æ”¾å™¨æ—¶è°ƒç”¨

æ›´å¤šç»†èŠ‚ï¼Œå‚è€ƒ[è¿™é‡Œ >>](https://paulrosen.github.io/abcjs/audio/synthesized-sound.html#settune-visualobj-useraction-audioparams)

##### Actions

é™¤äº†åœ¨è§†è§‰æ§ä»¶ä¸Šæ“ä½œéŸ³é¢‘æ’­æ”¾ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨APIæ¥æ§åˆ¶ï¼Œå¦‚ï¼š

- `play()` 
- `pause()`
- `toggleLoop()`
-  `restart()`
- `setProgress(ev)`

##### setWarp(percent)

æ”¹å˜é€Ÿåº¦ä¸ºä¼ å…¥çš„ç™¾åˆ†æ¯”ã€‚åº”è¯¥æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚å¦‚æœéŸ³ä¹å·²ç»åœ¨æ’­æ”¾ï¼Œå®ƒå°†ç«‹å³æ›´æ”¹é€Ÿåº¦ã€‚

##### download(fileName)

è¿™å°†æŠŠå½“å‰çš„éŸ³é¢‘ç¼“å†²åŒºä¸‹è½½ä¸ºä¸€ä¸ª WAV æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºä¼ å…¥çš„ fileNameã€‚

#### ä»£ç ç¤ºä¾‹

```tsx
import abcjs from 'abcjs';
import 'abcjs/abcjs-audio.css';
import React, { useEffect, useRef } from 'react';

const abcString = `
X: 1
T: Cooley's
M: 4/4
L: 1/8
R: reel
K: Emin
C: Li-HONGYAO
S: Copyright 2023, Li-HONGYAO.
|:D2|EB{c}BA B2 EB|~B2 AB dBAG|FDAD BDAD|FDAD dAFD|
EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2:|
|:gf|eB B2 efge|eB B2 gedB|A2 FA DAFA|A2 FA defg|
eB B2 eBgB|eB B2 defg|afe^c dBAF|DEFD E2:|
`;

const Test: React.FC = () => {

  // -- ç›¸å…³å¼•ç”¨
  const ref_visualObj = useRef<abcjs.TuneObject>();
  const ref_synthControl = useRef<abcjs.SynthObjectController>();

  // -- æ¸²æŸ“è°±å­å‚æ•°
  const visualParams: abcjs.AbcVisualParams = { add_classes: true };

  // -- åˆæˆéŸ³é¢‘å‚æ•°
  const cursorControl: abcjs.CursorControl = {};
  const visualOptions: abcjs.SynthVisualOptions = {
    displayLoop: true,
    displayRestart: true,
    displayPlay: true,
    displayProgress: true,
    displayWarp: true,
  };
  const audioParams: abcjs.SynthOptions = {};

  // -- åˆæˆéŸ³é¢‘
  const syntheticSound = () => {
    if (abcjs.synth.supportsAudio() && ref_visualObj.current) {
      // -- åˆ›å»ºSynthController
      ref_synthControl.current = new abcjs.synth.SynthController();
      // -- åŠ è½½è§†è§‰æ§ä»¶
      ref_synthControl.current.load('#audio', cursorControl, visualOptions);
      // -- å°†æ›²è°±åŠ è½½åˆ°æ’­æ”¾å™¨
      ref_synthControl.current
        .setTune(ref_visualObj.current, false, audioParams)
        .then(() => console.log('éŸ³é¢‘åŠ è½½æˆåŠŸï½'))
        .catch((error) => console.warn('éŸ³é¢‘åŠ è½½å¤±è´¥:', error));
    } else {
      const audioEl = document.querySelector('#audio')!;
      audioEl.innerHTML = 'Audio is not supported in this browser.';
    }
  };

  // -- ä¸‹è½½
  const download = () => {
    ref_synthControl.current?.download('audio');
  };

  useEffect(() => {
    // -- æ¸²æŸ“äº”çº¿è°±
    ref_visualObj.current = abcjs.renderAbc('paper', abcString, visualParams)[0];
  }, []);

  return (
    <div className="page">
      <div id="paper"></div>
      <div id="audio"></div>
      <br />
      <button onClick={syntheticSound}>åˆæˆ</button>
      <button onClick={download}>ä¸‹è½½</button>
    </div>
  );
};

export default Test;

```

### 3ï¸âƒ£ getMidiFile

@See https://paulrosen.github.io/abcjs/audio/synthesized-sound.html#getmidifile-source-options

è·å–MIDIæ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶ï¼ˆä¸ç”¨äºéŸ³é¢‘æ’­æ”¾çš„ç¼“å†²ï¼‰ã€‚MIDIæ–‡ä»¶æ˜¯ä¸€ç§æ ‡å‡†çš„æ•°å­—éŸ³ä¹æ–‡ä»¶æ ¼å¼ï¼Œå®ƒåŒ…å«äº†éŸ³ç¬¦ã€ä¹å™¨ä¿¡æ¯ç­‰ï¼Œå¯ä»¥åœ¨å„ç§éŸ³ä¹è½¯ä»¶ä¸­æ’­æ”¾å’Œç¼–è¾‘ã€‚è¿™ä¸ªå‡½æ•°å…è®¸ä½ ä»ABCéŸ³ä¹è°±é¢ä¸­ç”ŸæˆMIDIæ–‡ä»¶ï¼Œä»¥ä¾¿è¿›ä¸€æ­¥å¤„ç†ã€‚

```ts
const midi = abcjs.synth.getMidiFile(source: string | TuneObject, options?: MidiFileOptions): MidiFile
```

å‚æ•°è§£è¯»ï¼š

- `source`ï¼šabc å­—ç¬¦ä¸²æˆ–è€…è°ƒç”¨ renderAbc çš„è¿”å›å€¼ï¼ˆTuneObjectï¼‰

- `options`

  - `midiOutputType`ï¼šè¾“å‡ºç±»å‹ï¼Œå¯é€‰å€¼ `encoded` `binary` `link`

    > æ³¨æ„ï¼š**ä»¥ä¸‹æ˜¯ä»…åœ¨ç±»å‹ä¸º `link` æ—¶ä½¿ç”¨çš„å¯é€‰å‚æ•°**

  - `downloadClass`

  - `preTextDownload`ï¼šå‡ºç°åœ¨é“¾æ¥å‰çš„æ–‡æœ¬

  - `downloadLabel`ï¼šè¶…é“¾æ¥æ–‡æœ¬

  - `postTextDownload`ï¼šå‡ºç°åœ¨é“¾æ¥åçš„æ–‡æœ¬

  - `fileName`ï¼šæ–‡ä»¶å

> æç¤ºï¼šå…³äº getMidiFile çš„ç¤ºä¾‹ï¼Œè¯·å‚è€ƒ [è¿™é‡Œ](https://paulrosen.github.io/abcjs/audio/synthesized-sound.html#examples-1)

### 4ï¸âƒ£ playEvent(...)

@See https://paulrosen.github.io/abcjs/audio/synthesized-sound.html#playevent-pitches-gracenotes-millisecondspermeasure

å°†æ’­æ”¾ä¼ é€’çš„å•ä¸ªäº‹ä»¶ï¼Œäº‹ä»¶å¿…é¡»å…·æœ‰ä¸ç”±ç‚¹å‡»ç›‘å¬å™¨è¿”å›çš„äº‹ä»¶ç›¸åŒçš„æ ¼å¼ã€‚

```tsx
function playEvent(pitches: MidiPitches, graceNotes: MidiGracePitches | undefined, milliSecondsPerMeasure: number, soundFontUrl? : string, debugCallback?: (message: string) => void): Promise<void>
```

- `pitches`ï¼šéŸ³é«˜ä¿¡æ¯æ•°ç»„ï¼Œæ¯ä¸ªéŸ³é«˜å¯¹è±¡åŒ…å«å±æ€§å¦‚ä¸‹ï¼š
  - `pitch`ï¼šéŸ³é«˜çš„æ•´æ•°å€¼ï¼Œå…¶ä¸­ä¸­å¤®Cä¸º60
  - `durationInMeasures`ï¼šéŸ³ç¬¦çš„æ—¶é•¿ã€‚ä¾‹å¦‚ï¼Œåœ¨4/4æ‹ä¸­çš„å››åˆ†ä¹‹ä¸€éŸ³ç¬¦çš„ `durationInMeasures` ä¸º 0.25
  - `volume`ï¼šéŸ³ç¬¦çš„éŸ³é‡ï¼ŒèŒƒå›´ä»0åˆ°127
  - `instrument`ï¼šMIDIè§„èŒƒä¸­çš„ä¹å™¨ç¼–å·
- `graceNotes`ï¼šè£…é¥°éŸ³ç¬¦ï¼Œä¸ä¸Šé¢çš„æ ¼å¼ç›¸åŒï¼Œåªæ˜¯è¿™äº›éŸ³ç¬¦åœ¨ä¸»éŸ³ç¬¦ä¹‹å‰çŸ­æ—¶é—´å†…æ’­æ”¾ã€‚è€Œä¸”ï¼Œå¦‚æœæ•°ç»„ä¸­æœ‰å¤šä¸ªéŸ³ç¬¦ï¼Œåˆ™éŸ³ç¬¦å°†æŒ‰é¡ºåºæ’­æ”¾
- `millisecondsPerMeasure`ï¼š ç”¨äºå°† `durationInMeasures` å€¼è½¬æ¢ä¸ºå®é™…æ—¶é—´

ä»£ç ç¤ºä¾‹ï¼šç‚¹å‡»æ›²è°±ä¸Šçš„æŸä¸ªéŸ³ç¬¦æ—¶ï¼Œæ’­æ”¾éŸ³ç¬¦

```tsx
import abcjs from 'abcjs';
import 'abcjs/abcjs-audio.css';
import React, { useEffect, useRef } from 'react';
const abcString = `
X: 1
T: Cooley's
M: 4/4
L: 1/8
R: reel
K: Emin
C: Li-HONGYAO
S: Copyright 2023, Li-HONGYAO.
|:D2|EB{c}BA B2 EB|~B2 AB dBAG|FDAD BDAD|FDAD dAFD|
EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2:|
|:gf|eB B2 efge|eB B2 gedB|A2 FA DAFA|A2 FA defg|
eB B2 eBgB|eB B2 defg|afe^c dBAF|DEFD E2:|
`;

const Test: React.FC = () => {
  // -- ç›¸å…³å¼•ç”¨
  const ref_visualObj = useRef<abcjs.TuneObject>();

  useEffect(() => {
    // -- æ¸²æŸ“æ›²è°±
    ref_visualObj.current = abcjs.renderAbc('paper', abcString, {
      add_classes: true,
      clickListener: (abcElem: abcjs.AbcElem) => {
        if (abcElem.midiPitches && ref_visualObj.current) {
          // ç‚¹å‡»æ’­æ”¾é€‰ä¸­çš„éŸ³ç¬¦
          abcjs.synth.playEvent(
            abcElem.midiPitches,
            abcElem.midiGraceNotePitches,
            ref_visualObj.current.millisecondsPerMeasure(),
          );
        }
      },
    })[0];
    // -- åˆæˆéŸ³é¢‘
    ref_visualObj.current.setUpAudio({});
  }, []);
  return (
    <div className="page">
      <div id="paper"></div>
    </div>
  );
};

export default Test;
```

### 5ï¸âƒ£ activeAudioContext()

è·å–å½“å‰æ­£åœ¨è¢«ä½¿ç”¨çš„ AudioContext å¯¹è±¡ï¼š

```tsx
const ac = ABCJS.synth.activeAudioContext();
```

### 6ï¸âƒ£ instrumentIndexToName

å°†æ ‡å‡†MIDIéŸ³é«˜ç´¢å¼•è½¬æ¢ä¸ºåç§°çš„æ•°ç»„

```tsx
console.log(abcjs.synth.instrumentIndexToName)
```

### 7ï¸âƒ£ pitchToNoteName

å°†æ ‡å‡†MIDIéŸ³é«˜ç´¢å¼•è½¬æ¢ä¸ºåç§°çš„æ•°ç»„

```tsx
console.log(ABCJS.synth.pitchToNoteName);
```

## TimingCallbacks

@See https://paulrosen.github.io/abcjs/animation/timing-callbacks.html

åœ¨ ABCJS ä¸­ï¼Œ`timingCallbacks` æ˜¯ä¸åŠ¨ç”»å’Œæ—¶åºç›¸å…³çš„ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µã€‚å®ƒæ˜¯ç”¨äºæ§åˆ¶å’Œå¤„ç†ABCéŸ³ä¹è°±é¢ä¸­çš„åŠ¨ç”»å’Œæ—¶åºäº‹ä»¶çš„å›è°ƒå‡½æ•°é›†åˆã€‚è¿™äº›å›è°ƒå‡½æ•°å¯ä»¥åœ¨æ’­æ”¾éŸ³ä¹çš„è¿‡ç¨‹ä¸­çš„ä¸åŒæ—¶é—´ç‚¹è§¦å‘ï¼Œä»è€Œå…è®¸ä½ åœ¨è¿™äº›æ—¶é—´ç‚¹æ‰§è¡Œè‡ªå®šä¹‰çš„æ“ä½œã€‚

1. è‡ªå®šä¹‰åŠ¨ç”»æ•ˆæœï¼š
   - é€šè¿‡ `timingCallbacks`ï¼Œä½ å¯ä»¥åœ¨éŸ³ä¹æ’­æ”¾çš„ä¸åŒé˜¶æ®µæ‰§è¡Œè‡ªå®šä¹‰çš„åŠ¨ç”»æ•ˆæœã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨æ¯ä¸ªå°èŠ‚å¼€å§‹æ—¶æˆ–æ¯ä¸ªéŸ³ç¬¦æ’­æ”¾æ—¶è§¦å‘å›è°ƒæ¥å®ç°åŠ¨ç”»æ•ˆæœï¼Œè®©ç•Œé¢æ›´ç”ŸåŠ¨ã€‚
2. åŒæ­¥ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼š
   - å¦‚æœä½ çš„åº”ç”¨ç¨‹åºä¸­åŒ…å«ä¸éŸ³ä¹ç›¸å…³çš„ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼Œ`timingCallbacks` å…è®¸ä½ åœ¨éŸ³ä¹æ’­æ”¾çš„ç‰¹å®šæ—¶åˆ»è¿›è¡ŒåŒæ­¥ã€‚è¿™å¯ä»¥ç”¨äºåœ¨ç‰¹å®šçš„éŸ³ç¬¦æˆ–å°èŠ‚ä¹‹é—´æ›´æ–°ç•Œé¢çŠ¶æ€ã€‚
3. è§¦å‘å…¶ä»–æ“ä½œï¼š
   - ä½ å¯ä»¥ä½¿ç”¨ `timingCallbacks` åœ¨éŸ³ä¹æ’­æ”¾æœŸé—´è§¦å‘å…¶ä»–æ“ä½œï¼Œä¾‹å¦‚æ›´æ–°è¿›åº¦æ¡ã€æ˜¾ç¤ºå½“å‰æ’­æ”¾ä½ç½®ç­‰ã€‚è¿™æœ‰åŠ©äºå°†éŸ³ä¹æ’­æ”¾ä¸ç”¨æˆ·ç•Œé¢çš„å…¶ä»–éƒ¨åˆ†è¿›è¡Œåè°ƒã€‚
4. å®šåˆ¶åŒ–äº¤äº’ï¼š
   - å¦‚æœä½ æƒ³åœ¨éŸ³ä¹æ’­æ”¾æœŸé—´æ ¹æ®ç”¨æˆ·çš„äº¤äº’ä½œå‡ºå“åº”ï¼Œ`timingCallbacks` æä¾›äº†ä¸€ä¸ªæœºåˆ¶ï¼Œè®©ä½ èƒ½å¤Ÿæ•è·æ’­æ”¾çš„ä¸åŒæ—¶åˆ»å¹¶è§¦å‘ç›¸åº”çš„æ“ä½œã€‚

### åˆ›å»ºå®ä¾‹

```ts
const timingCallbacks = new abcjs.TimingCallbacks(visualObj, params);
```

å‚æ•°è§£è¯»ï¼š

- `visualObj`ï¼šrenderAbc è¿”å›å€¼ï¼ˆtuneObjectï¼‰
- `params`ï¼š
  - `qpm`ï¼šæ¯åˆ†é’Ÿå¤šå°‘æ‹ï¼Œå†³å®šäº†æ’­æ”¾é€Ÿåº¦ï¼Œé»˜è®¤å€¼ä¸º abc å­—ç¬¦ä¸²ä¸­çš„ `Q`
  - `extraMeasuresAtBeginning`ï¼šåœ¨ä¹è°±å¼€å¤´æ·»åŠ çš„é¢å¤–å°èŠ‚æ•°ã€‚è¿™å¯ä»¥ç”¨äºåœ¨å¼€å§‹æ’­æ”¾å‰æ’å…¥ä¸€äº›éŸ³ç¬¦ï¼ˆå¦‚ä¼‘æ­¢ç¬¦ï¼‰
  - `lineEndAnticipation`ï¼šè¡Œå°¾çš„é¢„æœŸæ—¶é—´ï¼Œå³åœ¨è¡Œå°¾ç»“æŸæ—¶æå‰åœé¡¿çš„æ—¶é—´é‡ã€‚
  - `beatSubdivisions`ï¼šæ¯ä¸ªæ‹å­çš„ç»†åˆ†æ•°ã€‚è¿™å†³å®šäº†æ¯ä¸ªæ‹å­è¢«åˆ†æˆçš„å°èŠ‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸º4ï¼Œæ¯ä¸ªæ‹å­å°†è¢«åˆ†æˆå››ä¸ªå°èŠ‚ã€‚
  - `beatCallback`ï¼šæ¯ä¸ªæ‹å­å¼€å§‹æ—¶çš„å›è°ƒå‡½æ•°ã€‚
  - `eventCallback`ï¼šç”¨äºå¤„ç†ç‰¹å®šäº‹ä»¶çš„è§¦å‘å›è°ƒå‡½æ•°ã€‚
  - `lineEndCallback`ï¼šåœ¨æ¯è¡Œç»“æŸæ—¶çš„å›è°ƒå‡½æ•°ã€‚

### å¸¸ç”¨æ–¹æ³•

- `start(position, units)`ï¼šå¯åŠ¨è§¦å‘å›è°ƒçš„è®¡æ—¶å™¨ã€‚åœ¨è°ƒç”¨ `pause` ä¹‹åï¼Œè¿™ä¸ªå‡½æ•°è¢«ç”¨äºå¯åŠ¨å’Œæ¢å¤ã€‚
- `pause()`ï¼šæš‚åœï¼Œä¹‹åè°ƒç”¨ `start()` å°†ä»å®ƒåœæ­¢çš„åœ°æ–¹æ¢å¤ã€‚
- `stop()`ï¼šåœæ­¢ï¼Œä¸‹ä¸€æ¬¡è°ƒç”¨ `start` å°†ä»å¤´å¼€å§‹ã€‚
- `reset()`ï¼šé‡ç½®ï¼Œå°†è®¡æ—¶å™¨ç§»å›åˆ°å¼€å§‹ä½ç½®ï¼Œè¿™æ ·åŠ¨ç”»å°±ä¼šé‡æ–°å¼€å§‹ã€‚å¯ä»¥åœ¨åŠ¨ç”»è¿è¡Œæˆ–æš‚åœæ—¶è°ƒç”¨ã€‚
- `setProgress(position, units)`ï¼šæ”¹å˜åŠ¨ç”»çš„ä½ç½®ã€‚
- `replaceTarget(visualObj)`ï¼šå¦‚æœåº•å±‚éŸ³ä¹åŠ¨æ€å˜åŒ–ï¼Œè¿™å°†æ›¿æ¢å½“å‰å¯¹è±¡ï¼Œè€Œæ— éœ€ç ´åå¯¹è±¡å¹¶é‡æ–°å¼€å§‹ã€‚

### ä»£ç ç¤ºä¾‹

```tsx
import abcjs from 'abcjs';
import 'abcjs/abcjs-audio.css';
import React, { useEffect, useRef } from 'react';

const abcString = `
X: 1
T: Cooley's
M: 4/4
L: 1/8
R: reel
K: Emin
C: Li-HONGYAO
S: Copyright 2023, Li-HONGYAO.
|:D2|EB{c}BA B2 EB|~B2 AB dBAG|FDAD BDAD|FDAD dAFD|
EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2:|
|:gf|eB B2 efge|eB B2 gedB|A2 FA DAFA|A2 FA defg|
eB B2 eBgB|eB B2 defg|afe^c dBAF|DEFD E2:|
`;

const Test: React.FC = () => {
  // -- ç›¸å…³å¼•ç”¨
  const ref_visualObj = useRef<abcjs.TuneObject>();
  const ref_timingCallbacks = useRef<abcjs.TimingCallbacks>();

  const visualParams: abcjs.AbcVisualParams = { add_classes: true };
  const animationOptions: abcjs.AnimationOptions = {
    beatCallback(event) {
      console.log('beatCallback > ', event);
    },
    eventCallback(event: any) {
      console.log('eventCallback > ', event);
      return 'continue';
    },
    lineEndCallback(event) {
      console.log('lineEndCallback > ', event);
    },
  };

  useEffect(() => {
    // -- æ¸²æŸ“äº”çº¿è°±
    const visualObj = abcjs.renderAbc('paper', abcString, visualParams)[0];
    // -- åˆ›å»ºTimingCallbacks
    const timingCallbacks = new abcjs.TimingCallbacks(
      visualObj,
      animationOptions,
    );
    // -- èµ‹å€¼å¼•ç”¨
    ref_visualObj.current = visualObj;
    ref_timingCallbacks.current = timingCallbacks;
  }, []);

  return (
    <div className="page">
      <div id="paper"></div>
      <div id="audio"></div>
      <br />
      <button onClick={() => ref_timingCallbacks.current?.start()}>å¼€å§‹</button>
      <button onClick={() => ref_timingCallbacks.current?.pause()}>æš‚åœ</button>
      <button onClick={() => ref_timingCallbacks.current?.start()}>æ¢å¤</button>
      <button onClick={() => ref_timingCallbacks.current?.stop}>åœæ­¢</button>
    </div>
  );
};

export default Test;
```

## Cursor

@See https://paulrosen.github.io/abcjs/audio/synthesized-sound.html#cursorcontrol-object

å½“æˆ‘ä»¬åœ¨æ’­æ”¾éŸ³é¢‘æ—¶ï¼Œå¯èƒ½éœ€è¦å®æ—¶æ ‡æ³¨å½“å‰æ’­æ”¾éŸ³ç¬¦çš„ä½ç½®ï¼ˆå±•ç¤ºæ¸¸æ ‡ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥åœ¨åˆæˆéŸ³é¢‘æ—¶ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ˆabcjs.CursorControlï¼‰ï¼Œå®ƒå¯ä»¥ç›‘å¬éŸ³é¢‘åœ¨æ’­æ”¾è¿‡ç¨‹ä¸­çš„æ‰€æœ‰äº‹ä»¶ï¼Œå¦‚ï¼š

1. å½“ä¸€ä¸ªéŸ³ç¬¦è¢«æ’­æ”¾æ—¶
2. å½“ä¸€ä¸ªèŠ‚æ‹åˆ°è¾¾æ—¶
3. å½“éŸ³ä¹çº¿æ¥è¿‘å°¾å£°æ—¶
4. å½“ä¸€ä¸ªå°èŠ‚å¼€å§‹æ—¶
5. å½“éŸ³ä¹åœæ­¢æ—¶

è¿™ä¸ªå¯¹è±¡å¤§æ¦‚é•¿è¿™æ ·ï¼š

```tsx
const cursorControl: abcjs.CursorControl = {
  onReady() {},
  onStart() {},
  onFinished() {},
  onBeat(beatNumber: number, totalBeats: number, totalTime: number) {},
  onEvent(event: abcjs.NoteTimingEvent) {},
};
```

### ä»£ç ç¤ºä¾‹

å†æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå°è£…ä¸€ä¸ªæ¸¸æ ‡ç±»ï¼Œä¾¿äºè°ƒç”¨ã€‚è¿™ä¸ªç±»ä¸»è¦æ˜¯ç”¨äºæ§åˆ¶è§†å›¾æ˜¾ç¤ºçš„ï¼Œä¸è¦å’Œä¸Šæ–‡çš„ CursorControl æ··ä¸ºä¸€è°ˆã€‚

> `CursorControl.ts`

```ts
import abcjs from 'abcjs';
export default class CursorControl {
  /** svg.abcjs-cursor */
  private cursor: SVGLineElement | null;
  /** æ›²è°±é€‰æ‹©å™¨ï¼Œç”¨äºå®šä½svg å…ƒç´ ï¼Œä¸renderAbcè°ƒç”¨ä½¿ç”¨çš„é€‰æ‹©å™¨ç›¸åŒ */
  private rootSelector: string;

  /**
   * æ„é€ å®ä¾‹
   * @param rootSelector
   */
  constructor(rootSelector: string) {
    this.cursor = null;
    this.rootSelector = rootSelector;
    this.init();
  }

  /**
   * åˆå§‹åŒ– svg.abcjs-cursor
   */
  public init() {
    const svg = document.querySelector(this.rootSelector + ' svg');
    this.cursor = document.createElementNS(
      'http://www.w3.org/2000/svg',
      'line',
    );
    this.cursor.setAttribute('class', 'abcjs-cursor');
    this.cursor.setAttributeNS(null, 'x1', '0');
    this.cursor.setAttributeNS(null, 'y1', '0');
    this.cursor.setAttributeNS(null, 'x2', '0');
    this.cursor.setAttributeNS(null, 'y2', '0');
    this.cursor.setAttributeNS(null, 'stroke-width', '2');
    svg?.appendChild(this.cursor);
  }

  /**
   * å–æ¶ˆä¹‹å‰é€‰ä¸­ç»“ç‚¹çš„çŠ¶æ€
   */
  public removeSelection() {
    const selector = this.rootSelector + ' .abcjs-highlight';
    const lastSelection = document.querySelectorAll(selector);
    for (let i = 0; i < lastSelection.length; i++) {
      lastSelection[i].classList.remove('abcjs-highlight');
    }
  }

  /**
   * å½“æ’­æ”¾åˆ°æ¯ä¸€ä¸ªéŸ³ç¬¦æˆ–ä¼‘æ­¢ç¬¦æ—¶å›è°ƒ
   * ç”¨äºæ›´æ–°æ¸¸æ ‡ä½ç½®
   * @param ev
   * @returns
   */
  public onEvent(ev: abcjs.NoteTimingEvent) {
    // this was the second part of a tie across a measure line. Just ignore it.
    if (ev.measureStart && ev.left === null) return;

    this.removeSelection();

    // Select the currently selected notes.
    for (let i = 0; i < ev.elements!.length; i++) {
      const note = ev.elements![i];
      for (let j = 0; j < note.length; j++) {
        note[j].classList.add('abcjs-highlight');
      }
    }

    // æ›´æ–°æ¸¸æ ‡ä½ç½®
    if (this.cursor) {
      const { left = 0, top = 0, height = 0, width = 0 } = ev;
      this.cursor.setAttribute('x1', String(left + width / 2));
      this.cursor.setAttribute('x2', String(left + width / 2));
      this.cursor.setAttribute('y1', String(top));
      this.cursor.setAttribute('y2', String(top + height));
    }
  }

  /**
   * éŸ³é¢‘æ’­æ”¾ç»“æŸæ—¶ï¼Œå¤ä½æ¸¸æ ‡ä½ç½®
   */
  public onFinished() {
    this.removeSelection();

    if (this.cursor) {
      this.cursor.setAttributeNS(null, 'x1', '0');
      this.cursor.setAttributeNS(null, 'y1', '0');
      this.cursor.setAttributeNS(null, 'x2', '0');
      this.cursor.setAttributeNS(null, 'y2', '0');
    }
  }
}
```

> `index.less`

```less
.abcjs-highlight {
  fill: #0a9ecc;
}
.abcjs-cursor {
  stroke: red;
}

```

#### egï¼šTimingCallbacks 

```tsx
import abcjs from 'abcjs';
import 'abcjs/abcjs-audio.css';
import React, { useEffect, useRef } from 'react';
import CursorControl from './CursorControl';
import './index.less';

const abcString = `
X: 1
T: Cooley's
M: 4/4
L: 1/8
R: reel
K: Emin
C: Li-HONGYAO
S: Copyright 2023, Li-HONGYAO.
|:D2|EB{c}BA B2 EB|~B2 AB dBAG|FDAD BDAD|FDAD dAFD|
EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2:|
|:gf|eB B2 efge|eB B2 gedB|A2 FA DAFA|A2 FA defg|
eB B2 eBgB|eB B2 defg|afe^c dBAF|DEFD E2:|
`;

const Test: React.FC = () => {
  // -- ç›¸å…³å¼•ç”¨
  const ref_timingCallbacks = useRef<abcjs.TimingCallbacks>();
  const ref_cursor = useRef<CursorControl | null>(null);

  // -- TimingCallbacks é…ç½®å‚æ•°
  const animationOptions: abcjs.AnimationOptions = {
    /** ç›‘å¬å›è°ƒ */
    eventCallback: (event: abcjs.NoteTimingEvent | null) => {
      if (event) {
        ref_cursor.current?.onEvent(event);
      } else {
        ref_cursor.current?.onFinished();
        ref_timingCallbacks.current?.stop();
      }
      return 'continue';
    },
  };

  useEffect(() => {
    // -- æ¸²æŸ“æ›²è°±
    const visualObj = abcjs.renderAbc('paper', abcString, { add_classes: true })[0];
    // -- æ„å»º TimingCallbacks
    ref_timingCallbacks.current = new abcjs.TimingCallbacks(
      visualObj,
      animationOptions,
    );
    // -- åˆ›å»ºæ¸¸æ ‡
    ref_cursor.current = new CursorControl('#paper');
  }, []);
  return (
    <div className="page">
      <div id="paper"></div>
      <button onClick={() => ref_timingCallbacks.current?.start(0)}>å¼€å§‹</button>
      <button onClick={() => ref_timingCallbacks.current?.pause()}>æš‚åœ</button>
      <button onClick={() => ref_timingCallbacks.current?.start()}>æ¢å¤</button>
      <button
        onClick={() => {
          ref_cursor.current?.onFinished();
          ref_timingCallbacks.current?.stop();
        }}
      >
        åœæ­¢
      </button>
    </div>
  );
};

export default Test;
```

#### egï¼šSynthController

```tsx
import abcjs from 'abcjs';
import 'abcjs/abcjs-audio.css';
import React, { useEffect, useRef } from 'react';
import CursorControl from './CursorControl';
import './index.less';
const abcString = `
X: 1
T: Cooley's
M: 4/4
L: 1/8
R: reel
K: Emin
C: Li-HONGYAO
S: Copyright 2023, Li-HONGYAO.
|:D2|EB{c}BA B2 EB|~B2 AB dBAG|FDAD BDAD|FDAD dAFD|
EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2:|
|:gf|eB B2 efge|eB B2 gedB|A2 FA DAFA|A2 FA defg|
eB B2 eBgB|eB B2 defg|afe^c dBAF|DEFD E2:|
`;

const Test: React.FC = () => {
  // -- ç›¸å…³ç´¢å¼•
  const ref_visualObj = useRef<abcjs.TuneObject>();
  const ref_cursor = useRef<CursorControl | null>(null);

  // -- éŸ³é¢‘æ§åˆ¶å™¨è§†å›¾å‚æ•°
  const visualOptions: abcjs.SynthVisualOptions = {
    displayLoop: false,
    displayRestart: true,
    displayPlay: true,
    displayProgress: true,
    displayWarp: true,
  };
  // -- æ§åˆ¶æ¸¸æ ‡
  const cursorControl: abcjs.CursorControl = {
    onFinished() {
      ref_cursor.current?.onFinished();
    },
    onEvent(event: abcjs.NoteTimingEvent) {
      ref_cursor.current?.onEvent(event);
    },
  };

  // -- åˆæˆéŸ³é¢‘
  const syntheticSound = () => {
    if (abcjs.synth.supportsAudio() && ref_visualObj.current) {
      // --åˆ›å»ºSynthController;
      const synthControl = new abcjs.synth.SynthController();
      // -- åŠ è½½è§†è§‰æ§ä»¶
      synthControl.load('#audio', cursorControl, visualOptions);
      // -- å°†æ›²è°±åŠ è½½åˆ°æ’­æ”¾å™¨
      synthControl
        .setTune(ref_visualObj.current, false)
        .then(() => console.log('Audio load success.'))
        .catch((error) => console.warn('Audio load fail:', error));
      // -- åˆ›å»ºæ¸¸æ ‡
      ref_cursor.current = new CursorControl('#paper');
    } else {
      const audioEl = document.querySelector('#audio')!;
      audioEl.innerHTML = 'Audio is not supported in this browser.';
    }
  };

  useEffect(() => {
    // -- æ¸²æŸ“äº”çº¿è°±
    ref_visualObj.current = abcjs.renderAbc('paper', abcString, {
      add_classes: true,
    })[0];
  }, []);
  return (
    <div className="page">
      <div id="paper"></div>
      <div id="audio"></div>
      <br />
      <button onClick={syntheticSound}>åˆæˆéŸ³é¢‘</button>
    </div>
  );
};

export default Test;

```

# æ¡ˆä¾‹

## ä¸šåŠ¡éœ€æ±‚

1. åŸºäº abcstring ç»˜åˆ¶äº”çº¿è°±
2. åç«¯é€šè¿‡ç®—æ³•è¿”å›ä¼´å¥+åˆæˆäººå£°çš„éŸ³é¢‘é“¾æ¥
3. ç‚¹å‡»æ’­æ”¾æ—¶ï¼Œé€šè¿‡æ¸¸æ ‡æ ‡æ³¨æ’­æ”¾çš„éŸ³ç¬¦ä½ç½®
4. ç‚¹å‡»æŸä¸ªéŸ³ç¬¦æ—¶ï¼Œæ’­æ”¾è¯¥éŸ³ç¬¦

## å®ç°æ€è·¯

1. ç»˜åˆ¶äº”çº¿è°±ï¼š`abcjs.renderAbc()` ã€‚
2. ç»˜åˆ¶æ¸¸æ ‡ï¼šç”±äºäº”çº¿è°±æ˜¯åŸºäº SVG ç»˜åˆ¶çš„ï¼Œå½“äº”çº¿è°±ç»˜åˆ¶å®Œæˆä¹‹åï¼Œå¯é€šè¿‡ `document.createElementNS` ç»˜åˆ¶æ¸¸æ ‡ï¼Œåˆå§‹ä½ç½®æ”¾åœ¨ (0, 0) å³å¯ã€‚
3. ä¸ºä¿è¯ä¼´å¥ã€åˆæˆäººå£°ä»¥åŠæ¸¸æ ‡çš„åŒæ­¥ï¼Œé¦–å…ˆéœ€ç¡®ä¿ä¸‰è€…çš„æŒç»­æ—¶é—´æ˜¯ä¸€è‡´çš„ï¼Œç„¶åé€šè¿‡ `<audio>` æ ‡ç­¾èµ‹å€¼éŸ³é¢‘é“¾æ¥ï¼Œå¹¶ç›‘å¬ `oncanplaythrough` äº‹ä»¶ï¼Œç‚¹å‡»æ’­æ”¾æ—¶ï¼Œåˆ¤æ–­ä¸¤ä¸ªé“¾æ¥æ˜¯å¦éƒ½å·²é¢„åŠ è½½å®Œæˆï¼Œå½“é¢„åŠ è½½å®Œæˆæ—¶ï¼ŒåŒæ­¥æ’­æ”¾å³å¯ã€‚
4. è¦å®ç°æ¸¸æ ‡çš„åŒæ­¥ï¼Œå¯é€šè¿‡ `abcjs.TimingCallbacks` å®ç°ï¼ŒåŒæ—¶ç›‘å¬ `eventCallback` å›è°ƒï¼Œåœ¨è¯¥å›è°ƒå‡½æ•°ä¸­ï¼Œå¯å®æ—¶è·å–å½“å‰æ’­æ”¾çš„éŸ³ç¬¦åæ ‡ä¿¡æ¯ï¼Œç„¶ååŸºäºéŸ³ç¬¦åæ ‡ä¿¡æ¯åŠ¨æ€è®¡ç®—æ¸¸æ ‡ä½ç½®ã€‚
5. éŸ³é¢‘åœ¨æ’­æ”¾ã€æš‚åœã€æ¢å¤ä»¥åŠåœæ­¢æ“ä½œæ—¶ï¼Œéœ€åŒæ­¥è°ƒç”¨ `audio`ã€`abcjs.TimingCallbacks` ç›¸åº”çš„APIã€‚

## ä»£ç ç¤ºä¾‹

```tsx
import abcjs from 'abcjs';
import 'abcjs/abcjs-audio.css';
import React, { useEffect, useRef } from 'react';
import CursorControl from './CursorControl';
import './index.less';

const abcString = `
X: 1
T: Cooley's
M: 4/4
L: 1/8
R: reel
K: Emin
S: Copyright 2023, Li-HONGYAO.
|:D2|EB{c}BA B2 EB|~B2 AB dBAG|FDAD BDAD|FDAD dAFD|
EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2:|
|:gf|eB B2 efge|eB B2 gedB|A2 FA DAFA|A2 FA defg|
eB B2 eBgB|eB B2 defg|afe^c dBAF|DEFD E2:|
`;

enum MediaStatus {
  Play = 0,
  Pause = 1,
  Replay = 2,
  Stop = 3,
}

const Test: React.FC = () => {
  // -- æ˜¯å¦å…è®¸æ’­æ”¾äººå£°
  const canPlayVoice = useRef(false);
  // -- æ˜¯å¦å…è®¸æ’­æ”¾ä¼´å¥
  const canPlayAccompaniment = useRef(false);

  // -- ç›¸å…³å¼•ç”¨
  const ref_code = useRef(abcString);
  const ref_voice = useRef<HTMLAudioElement>(null);
  const ref_accompaniment = useRef<HTMLAudioElement>(null);
  const ref_timingCallbacks = useRef<abcjs.TimingCallbacks>();
  const ref_visualObj = useRef<abcjs.TuneObject>();
  const ref_cursor = useRef<CursorControl>();

  /**
   * æ¸²æŸ“äº”çº¿è°±
   * @param code
   */
  const renderAbc = (code: string) => {
    const visualOptions: abcjs.AbcVisualParams = {
      add_classes: true,
      responsive: 'resize',
      selectionColor: 'red',
      clickListener(abcElem: abcjs.AbcElem) {
        // -- è·å–ç‚¹å‡»çš„å­—ç¬¦
        const { startChar, endChar } = abcElem;
        const char = ref_code.current.slice(startChar, endChar);
        const replacement = prompt('è¯·è¾“å…¥æ–°çš„éŸ³ç¬¦ï¼š', char);
        // -- å°†ç‚¹å‡»å­—ç¬¦æ›¿æ¢æˆå…¶ä»–å­—ç¬¦
        const modifiedStr =
          ref_code.current.slice(0, startChar) +
          replacement +
          ref_code.current.slice(endChar);
        // -- æ¸²æŸ“äº”çº¿è°±
        const visualObj = renderAbc(modifiedStr);
        // -- æ„å»ºTimingCallbacksï¼Œç”¨äºåŒæ­¥æ¸¸æ ‡
        ref_timingCallbacks.current = createTimingCallbacks(visualObj);
        ref_code.current = modifiedStr;
        console.log(modifiedStr);
      },
    };
    const visualObj = abcjs.renderAbc('paper', code, visualOptions)[0];
    ref_visualObj.current = visualObj;
    return visualObj;
  };
  /**
   * æ„å»ºTimingCallbacksï¼Œç”¨äºåŒæ­¥æ¸¸æ ‡
   * @param visualObj
   */
  const createTimingCallbacks = (visualObj: abcjs.TuneObject) => {
    return new abcjs.TimingCallbacks(visualObj, {
      eventCallback: (event: abcjs.NoteTimingEvent | null) => {
        if (event) {
          ref_cursor.current?.onEvent(event);
        } else {
          ref_cursor.current?.onFinished();
          ref_timingCallbacks.current?.stop();
        }
        return 'continue';
      },
    });
  };

  const downloadMidi = () => {
    const midi = abcjs.synth.getMidiFile(abcString, {
      midiOutputType: 'encoded',
    });
    const a = document.createElement('a');
    a.setAttribute('href', midi);
    a.click();
  };

  /**
   * å…¼å®¹æ˜¯å¦å…è®¸æ’­æ”¾
   * ä¸ºä¿è¯ä¼´å¥å’Œäººå£°åŒæ­¥æ’­æ”¾ï¼Œå¿…é¡»ä¿è¯ä¸¤è€…åŒæ—¶é¢„åŠ è½½å®Œæˆ
   */
  useEffect(() => {
    if (ref_voice.current && ref_accompaniment.current) {
      ref_voice.current.oncanplaythrough = () => {
        console.log('äººå£°ok');
        canPlayVoice.current = true;
      };
      ref_accompaniment.current.oncanplaythrough = () => {
        console.log('ä¼´å¥ok');
        canPlayAccompaniment.current = true;
      };
    }
  }, []);

  useEffect(() => {
    // -- æ¸²æŸ“äº”çº¿è°±
    const visualObj = renderAbc(abcString);
    // -- æ„å»ºTimingCallbacksï¼Œç”¨äºåŒæ­¥æ¸¸æ ‡
    ref_timingCallbacks.current = createTimingCallbacks(visualObj);
    // -- åˆ›å»ºæ¸¸æ ‡
    ref_cursor.current = new CursorControl('#paper');
  }, []);
  return (
    <div className="page">
      <div id="paper"></div>
      <div id="audio" style={{ width: 770 }}></div>
      <button
        onClick={() => {
          if (canPlayVoice.current && canPlayAccompaniment.current) {
            ref_voice.current?.play();
            ref_accompaniment.current?.play();
            ref_timingCallbacks.current?.start(0);
          }
        }}
      >
        æ’­æ”¾
      </button>
      <button
        onClick={() => {
          ref_voice.current?.pause();
          ref_accompaniment.current?.pause();
          ref_timingCallbacks.current?.pause();
        }}
      >
        æš‚åœ
      </button>
      <button
        onClick={() => {
          ref_voice.current?.play();
          ref_accompaniment.current?.play();
          ref_timingCallbacks.current?.start();
        }}
      >
        æ¢å¤
      </button>
      <button
        onClick={() => {
          ref_voice.current?.pause();
          ref_accompaniment.current?.pause();
          ref_voice.current!.currentTime = 0;
          ref_accompaniment.current!.currentTime = 0;
          ref_timingCallbacks.current?.stop();
          ref_cursor.current?.onFinished();
        }}
      >
        åœæ­¢
      </button>
      <button onClick={downloadMidi}>ä¸‹è½½midi</button>
      <audio
        ref={ref_voice}
        src="https://xingzhe-web.s3.cn-northwest-1.amazonaws.com.cn/ai-poet-compose/324b4dbf-0c79-4c3b-baef-9d2af23c2aea.wav"
      />
      <audio
        ref={ref_accompaniment}
        src="https://xingzhe-web-test.s3.cn-northwest-1.amazonaws.com.cn/ai_music_classroom/media/file/é“ƒå„¿å“å®å½“ 1141251 100bpm.wav"
      />
    </div>
  );
};
export default Test;

```



